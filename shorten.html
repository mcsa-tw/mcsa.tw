<!DOCTYPE html>
<html>
<head>
	<meta charset="utf8">
	<title>mcsa.tw 短網址</title>
	<script>if(location.protocol == 'http:') location.href = 'https:' + window.location.href.substring(window.location.protocol.length);</script>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocas-ui/2.3.2/tocas.css">
	<link rel="icon" type="image/png" href="/res/img/logo.jpg">
	<style>
		body {
			background: #EEE
		}

		a {
			color: #F19072
		}

		a:hover,
		a:active {
			color: #EE7951
		}

		.ts.button {
			color: #FFF;
			background: #F19072;
			border: none;
		}

		.ts.button:not(.visible):not(.hidden):not(.active):not(:active):not(.opinion):hover,
		.ts.button:active:not(.opinion) {
			background: #EE7951 !important;
			color: #FFF !important
		}

		.ts.loading.loading.loading.loading.loading.loading.button {
			color: transparent !important;
		}
	</style>
	<script>
		String.prototype.trim = function (char) {
			if (char) return this.replace(new RegExp('^\\'+char+'+|\\'+char+'+$', 'g'), '');
			return this.replace(/^\s |\s $/g, '');
		};
		function changeValue(e) {
			if(e.name == 'short') document.getElementsByName('filename')[0].value = e.value.trim('/') + '.html';
			if(e.name == 'url') document.getElementsByName('value')[0].value = '<meta http-equiv="refresh" content="0;url=' + e.value.trim() + '">';
			if(e.name == 'info') document.getElementsByName('message')[0].value = '[短網址] ' + e.value.trim();
		}

		function sendForm(e) {
			if(document.getElementsByName('url')[0].value == '') return alert('請填寫要縮短的網址');
			else if(!document.getElementsByName('url')[0].checkValidity()) return alert('要縮短的網址格式錯誤');
			else if(document.getElementsByName('short')[0].value == '') return alert('請填寫短網址後綴');
			else if(document.getElementsByName('info')[0].value == '') return alert('請填寫說明');
			else document.getElementById('realform').submit();

		}
	</script>
</head>
<body>
	<div style="width:95%;max-width:350px;margin-left:auto!important;margin-right:auto!important">
		<br>
		<br><br>
		<div class="ts raised segment">
			<div class="ts large center aligned header" style="margin-top:20px">mcsa.tw 短網址</div><br>
			<div class="ts form">
				<div class="field">
					<label>要縮短的網址</label>
					<input name="url" required="required" placeholder="須包含 http:// 或 https://" autofocus="autofocus" type="url" oninput="changeValue(this)">
				</div>
				<div class="field">
					<label>短網址後綴</label>
					<input name="short" required="required" placeholder="要放在 mcsa.tw/ 後面的短文字" oninput="changeValue(this)">
				</div>
				<div class="field">
					<label>說明</label>
					<input name="info" required="required" placeholder="這是什麼的短網址？" oninput="changeValue(this)">
				</div>
			</div>
			<br><br>
			<form method="get" action="https://github.com/mcsa-tw/mcsa.tw/new/main" id="realform">
				<input type="hidden" name="filename">
				<input type="hidden" name="value">
				<input type="hidden" name="message">
				<button style="margin-bottom:8px" class="ts fluid button" type="button" onclick="sendForm(this)">送出</button><br>
				送出後記得去按最底下的 "Commit new file"
			</form>
		</div>
	</div>
</body>
</html>
